<!DOCTYPE html>
<html ng-app="usersApp">
  <head>
    <meta charset="utf-8">
    <title>Partials and Custom Users</title>
    <script src="angular/angular.js"></script>
    <script type="text/javascript">
      var app = angular.module("usersApp", ["ngRoute"]);

      app.factory("userFactory", function(){
        var factory = {};
        factory.nextID = 0;
        factory.users = [];
        factory.create = function(user){
          user.id = factory.nextID;
          factory.nextID++;
          factory.users.push(user);
        };
        factory.remove = function(id){
          for(let i = 0; i < factory.users.length; i++){
            if(factory.users[i].id === id){
              factory.users.splice(i, 1);
              break;
            }
          }
        };
        factory.show = function(id){
          for(let i = 0; i < factory.users.length; i++){
            if(factory.users[i].id === id)
              return factory.users[i];
          }
        };
        factory.index = function(){
          return factory.users;
        };
        return factory;
      });

      app.controller("CustomizeUsersController", ["$scope", "userFactory", function($scope, userFactory){
        $scope.tableSort = "firstName";
        $scope.reverseTable = false;
        $scope.newUser = {};

        $scope.createUser = function(){
          userFactory.create(newUser);
          newUser = {};
        }
        $scope.removeUser = function(id){
          userFactory.remove(id);
        }
      }]);

      app.controller("UserListsController", ["$scope", "userFactory", function($scope, userFactory){
        $scope.tableSort = "firstName";
        $scope.reverseTable = false;
      }]);
    </script>
  </head>
  <body>

  </body>
</html>
